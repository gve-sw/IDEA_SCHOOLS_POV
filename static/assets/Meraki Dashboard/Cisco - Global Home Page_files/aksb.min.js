/*
Copyright 2010 Google Inc.
Copyright 2016 Akamai Technolgies

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

See the source code here:
     http://code.google.com/p/episodes/
*/


!function(){function e(e,i){function s(){this.data={},this.value=[]}function u(e,t){for(var r={},n=i.getElementsByTagName(t),o=0;o<n.length;o++)e.href=n[o].src||n[o].href,e.href.match(/^https?:\/\//)&&(r[e.href]=n[o]);return r}function d(e,t){if(e&&e.hasAttribute("rel"))for(var r=e.rel.split(/[\u0009\u000A\u000C\u000D\u0020]+/),n=0;n<r.length;){var o=r[n++].toLowerCase();if(f[o]){t.push(f[o]);break}}}"undefined"==typeof e.RT&&(e.RT={});var p=e.RT;if(!p.version&&"undefined"!=typeof e.AKSB.version&&void 0!==Object.keys){p.version="0.2";var f={prefetch:1,preload:2,prerender:3,stylesheet:4};p.init=function(){p.getW3CTimings()},p.getW3CTimings=function(){var f=new s,m=p.getResourceTimingAPI(),l=i.createElement("a"),c=u(l,"script"),S=u(l,"link");for(var v in m)if("undefined"!=typeof m[v].duration){var g=[m[v].initiatorType];if("script"===m[v].initiatorType||"link"===m[v].initiatorType){var h=c[m[v].name];h&&(h.async?g.push("async"):h.defer&&g.push("defer"))}"link"===m[v].initiatorType&&d(S[m[v].name],g),f.insert(m[v].name,t([Math.round(m[v].redirectStart),Math.round(m[v].redirectEnd),Math.round(m[v].fetchStart),Math.round(m[v].domainLookupStart),Math.round(m[v].domainLookupEnd),Math.round(m[v].connectStart),Math.round(m[v].connectEnd),Math.round(m[v].secureConnectionStart),Math.round(m[v].requestStart),Math.round(m[v].responseStart),Math.round(m[v].responseEnd),Math.round(m[v].duration),g.join("_"),m[v].nextHopProtocol,m[v].transferSize,m[v].encodedBodySize,m[v].decodedBodySize]))}p.radtree=f,p.baseurl=i.location.protocol.toLowerCase()+"//"+i.location.hostname.toLowerCase()+i.location.pathname;var E=function(t){var s=new XMLHttpRequest;s.open("POST",("https:"===e.document.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/RRT",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var u={nt:escape(JSON.stringify(t)),rt:escape(JSON.stringify(p.radtree.data)),rid:e.AKSB.prof.requestid,gh:e.AKSB.prof.ghostip,b:e.AKSB.bf.get(),c:e.AKSB.prof.custid,us:e.AKSB.prof.ustr,ol:e.AKSB.prof.originlat,cr:e.AKSB.prof.clientrtt,ua:r,pl:n,mt:o,mb:a,vc:e.AKSB.aksbVersion(),bpcip:e.AKSB.getMangledAddress(),akTX:e.AKSB.akTX,akTI:e.AKSB.akTI,ai:e.AKSB.prof.ai,rf:"string"==typeof i.referrer?encodeURIComponent(i.referrer.replace(/\?.*/,"?")):""},d=[];for(var f in u)u.hasOwnProperty(f)&&u[f]&&d.push(f+"="+u[f]);s.send(d.join("&"))},k=e.performance&&e.performance.timing;if(k){var y=e.performance.timing,b=function(){if(y.loadEventEnd>0){var r=[y.domainLookupEnd-y.domainLookupStart,y.connectStart-y.domainLookupStart,y.connectEnd-y.domainLookupStart,y.secureConnectionStart?y.secureConnectionStart-y.domainLookupStart:null,y.requestStart-y.domainLookupStart,y.responseStart-y.domainLookupStart,y.responseEnd-y.domainLookupStart,y.domLoading-y.domainLookupStart,y.domInteractive-y.domainLookupStart,y.msFirstPaint?y.msFirstPaint-y.navigationStart:"undefined"!=typeof e.chrome&&e.chrome.hasOwnProperty("loadTimes")?Math.round(1e3*e.chrome.loadTimes().firstPaintTime)-y.domainLookupStart:null,y.domContentLoadedEventStart-y.domainLookupStart,y.domContentLoadedEventEnd-y.domainLookupStart,y.domComplete-y.domainLookupStart,y.loadEventStart-y.domainLookupStart,y.loadEventEnd-y.domainLookupStart],n={};n[p.baseurl]=t(r),E(n)}else y.loadEventEnd<=0&&setTimeout(b,100)};b()}else{var T=function(){if("AKSB"in e&&"measures"in e.AKSB&&"t_plt"in e.AKSB.measures){var t=[null,null,null,0,null,null,null,null,null,null,null,null,null,e.AKSB.measures.t_onload,e.AKSB.measures.t_plt],r={};r[p.baseurl]=t,E(r)}else setTimeout(T,100)};T()}},p.getResourceTimingAPI=function(){if("performance"in e){if("getEntriesByType"in e.performance)return e.performance.getEntriesByType("resource");if("webkitGetEntriesByType"in e.performance)return e.performance.webkitGetEntriesByType("resource")}return null},s.prototype.insert=function(e,t){for(var r=this.data;e;){var n=this.get_prefix(e,Object.keys(r)),o=n[0],a=n[1];if(!o||"string"!=typeof o||"string"!=typeof a)break;var i=o.length;if(o!==a){var s=a.slice(i,a.length),u=r[a];u===this.value&&(u=JSON.parse(JSON.stringify(u))),r[o]={},r[o][s]=u,delete r[a]}else r[o]===this.value&&(r[o]=JSON.parse(JSON.stringify(this.value)));e=e.slice(i,e.length),r=r[o]}return r[e]=e?t:null,!0},s.prototype.get_prefix=function(e,t){function r(e,t){return e.length<t.length?-1:e.length>t.length?1:0}function n(e,t){return""===t||null!=e&&null!=t&&(e=String(e),t=String(t),e.length>=t.length&&e.slice(0,t.length)===t)}if(t.sort(r),"undefined"!=typeof e){wc=e[0];for(var o in t)if(n(t[o],wc))for(var a=e.length;a>=1;a--)if(n(t[o],e.slice(0,a)))return[e.slice(0,a),t[o]]}return["",null]};var m=e.AKSB.prof.akTT;if(e.performance&&(e.performance.getEntries||e.performance.webkitGetEntries))if("R"===m)p.init();else{if("O"!==m&&void 0!==m||!(e.document.location.search.search("akamai-rum-rt=on")>=0)&&10<=100*Math.random())return;p.init()}}}function t(e){for(var t=0;t<e.length;t++)"number"==typeof e[t]&&(e[t]<0||e[t]>i)&&(e[t]=null);return e}var r,n,o,a;!function(t){t.parent!==t&&void 0==t.AKSB&&(t=t.parent);var i=t.document;"undefined"==typeof t.AKSB&&(t.AKSB={});var s=t.AKSB;if(void 0!=s.prof&&s.prof.origin===!0){var u="number"==typeof s.prof.beaconrate?parseInt(s.prof.beaconrate,10):10;if(u<=100*Math.random())return}if(s.q=s.q||[],s.autorun="undefined"==typeof s.autorun||s.autorun,!s.version&&"X"!==t.AKSB.prof.akTT){s.version=15;var d,p,f,m,l,c;s.init=function(){s.bDone=!1,s.marks={},s.measures={},s.starts={},s.getClientProf(),s.processQ();var e=s.findStartWebTiming();e&&(s.mark("starttime",e),s.addEventListener("DOMContentLoaded",s.onready,!1),s.addEventListener("load",s.onload,!1),"complete"===i.readyState&&(s.onloadHasFired=!0,window.setTimeout(s.onload,1)),s.processQ())},s.processQ=function(){for(var e=s.q.length,t=0;t<e;t++){var r=s.q[t],n=r[0];"mark"===n?s.mark(r[1],r[2]):"measure"===n?s.measure(r[1],r[2],r[3]):"done"===n&&s.done(r[1])}},s.getClientProf=function(){s.prof=s.prof||{},d=s.prof.ipv6===!0||"true"===s.prof.ipv6,p=s.prof.beaconUrl||("https:"===i.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/2/"+s.prof.custid+"/b",r=escape(t.navigator.userAgent),n=escape(t.navigator.platform),f=escape(i.location.protocol.toLowerCase()+"//"+i.location.hostname.toLowerCase()+i.location.pathname);var e=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,u="",S="";if(e&&"number"==typeof e.type?e.type==e.WIFI?(u="wifi",S=7e6):e.type==e.CELL_2G?(u="cellular",S=384):e.type==e.CELL_3G?(u="cellular",S=42e3):e.type==e.CELL_4G?(u="cellular",S=1e5):e.type==e.ETHERNET?(u="ethernet",S=1e7):e.type==e.NONE?(u="none",S=0):u="unknown":e&&"string"==typeof e.type&&(u=e.type,e.downlinkMax&&(S=Math.round(1e3*e.downlinkMax))),o=escape(u),a=S,m=i.visibilityState||i.webkitVisibilityState||i.mozVisibilityState||i.msVisibilityState,l="undefined"!=typeof t.aFeoApplied,c=""!==i.location.search,s.prof.pct){var v=!(parseInt(s.prof.pct,10)<=100*Math.random());if(v&&void 0!==s.prof.clientip){var g=s.getMangledAddress(),h=d?"j":"i";p=("https:"===i.location.protocol?"https:":"http:")+"//"+h+g+"-ds-aksb-a.akamaihd.net/2/"+s.prof.custid+"/b"}}},s.getMangledAddress=function(){if(void 0===s.prof.clientip)return"";if(d){var e=s.prof.clientip.split(":");return(""==e[0]?"":parseInt(e[0],16).toString(32))+"z"+(""==e[1]?"":parseInt(e[1],16).toString(32))+"z"+(""==e[2]?"":parseInt(e[2],16).toString(32))}var e=s.prof.clientip.split(".");return("00000000"+(256*(256*(256*+e[0]+ +e[1])+ +e[2])+0).toString(16)).slice(-8)},s.mark=function(e,t){e&&(s.marks[e]=parseInt(t||(new Date).getTime(),10),"firstbyte"===e?s.measure("t_fb","starttime","firstbyte"):"onload"===e?s.measure("t_onload","starttime","onload"):"done"===e&&s.measure("t_plt","starttime","done"))},s.measure=function(e,t,r){if(e){var n;if("undefined"==typeof t)n="number"==typeof s.marks[e]?s.marks[e]:(new Date).getTime();else if("number"==typeof s.marks[t])n=s.marks[t];else{if("number"!=typeof t)return;n=t}var o;if("undefined"==typeof r)o=(new Date).getTime();else if("number"==typeof s.marks[r])o=s.marks[r];else{if("number"!=typeof r)return;o=r}s.starts[e]=parseInt(n,10),s.measures[e]=parseInt(o-n,10)}},s.done=function(e){s.mark("done");var r=function(){s.bDone=!0,s.autorun&&s.sendBeacon(),"function"==typeof e&&e()},n=s.getNavTimingAPI(),o=n.navigation,a=n.timing;if(void 0!==n){var i=function(){for(var e in a)s.mark(e,a[e]);if(s.measure("dE","domainLookupStart","domainLookupEnd"),s.measure("cS","domainLookupStart","connectStart"),a.secureConnectionStart&&s.measure("sS","domainLookupStart","secureConnectionStart"),s.measure("cE","domainLookupStart","connectEnd"),s.measure("rqS","domainLookupStart","requestStart"),s.measure("rsS","domainLookupStart","responseStart"),s.measure("rsE","domainLookupStart","responseEnd"),a.msFirstPaint)s.measure("fp","navigationStart","msFirstPaint");else if("undefined"!=typeof t.chrome&&t.chrome.hasOwnProperty("loadTimes")){var n=Math.round(1e3*t.chrome.loadTimes().firstPaintTime);n>0&&s.measure("fp","domainLookupStart",n)}s.measure("dl","domainLookupStart","domLoading"),s.measure("di","domainLookupStart","domInteractive"),s.measure("dlS","domainLookupStart","domContentLoadedEventStart"),s.measure("dlE","domainLookupStart","domContentLoadedEventEnd"),s.measure("dc","domainLookupStart","domComplete"),s.measure("leS","domainLookupStart","loadEventStart"),s.measure("leE","domainLookupStart","loadEventEnd"),r()},u=function(){o&&(0===o.type||1===o.type)&&a&&a.loadEventEnd>0?i():a&&a.loadEventEnd<=0&&setTimeout(u,100)};u()}},s.aksbVersion=function(){return""+(void 0===s.prof.blver?0:s.prof.blver)+":"+(void 0===s.version?0:s.version)},s.sendBeacon=function(u,d){u=u||p;var m=(s.measures,"");s.bf=s.bitField(),s.createBitField();var l={dE:s.measures.dE,cS:s.measures.cS,cE:s.measures.cE,rqS:s.measures.rqS,rsS:"undefined"!=typeof s.measures.rsS?s.measures.rsS:s.measures.t_fb,rsE:s.measures.rsE,sS:s.measures.sS,dl:s.measures.dl,di:s.measures.di,fp:s.measures.fp,dlS:s.measures.dlS,dlE:"undefined"!=typeof s.measures.dlE?s.measures.dlE:s.measures.t_onready,dc:s.measures.dc,leS:"undefined"!=typeof s.measures.leS?s.measures.leS:s.measures.t_onload,leE:"undefined"!=typeof s.measures.leE?s.measures.leE:s.measures.t_plt,to:s.measures.to,ol:s.prof.originlat,cr:s.prof.clientrtt,mt:o,mb:a,b:s.bf.get(),u:f,ua:r,pl:n,us:s.prof.ustr,gh:s.prof.ghostip,t:s.prof.token,rid:s.prof.requestid,r:s.prof.region,akM:s.prof.akM,akN:s.prof.akN,vc:s.aksbVersion(),bpcip:s.getMangledAddress(),akTX:s.prof.akTX,akTI:s.prof.akTI,ai:s.prof.ai,pmgn:s.prof.pmgn,pmgi:s.prof.pmgi,pmp:s.prof.pmp};if(l)for(var c in l)m+="&"+escape(c)+"="+("undefined"==typeof l[c]?"":l[c]);if(m){if(m=m.substring(1),d)for(var S in d)d.hasOwnProperty(S)&&(m+="&"+escape(S)+"="+escape(d[S]));var v=(s.bf.get(),new Image);return v.src=u+"?"+m,e(t,i),v.src}return""},s.bitField=function(e){var t=Math.abs(e),r=function(){};return r.prototype.set=function(e){return this.hasbit(e)?t:t|=e},r.prototype.hasbit=function(e){return e>t?0:t&e},r.prototype.get=function(){return t},new r},s.createBitField=function(){var e={MS_NT:1,IPv6:16,FEO:32,VIA_SPDY:64,VIS_HIDDEN:128,VIS_VISIBLE:256,VIS_PRERENDERED:512,QUERY_TRUNCATED:2048,RUM_AT_ORIGIN:4096,ONLOAD_HAS_FIRED:8192,VIA_HTTP_TWO:131072,TXN_ENABLED:262144,RUA_APPLIED:524288,VIA_QUIC:1048576};s.bf.set(e.MS_NT);var t=s.prof.protocol;void 0!==t&&("h2"==t.slice(0,2)?s.bf.set(e.VIA_HTTP_TWO):"spdy"==t.slice(0,4)&&s.bf.set(e.VIA_SPDY));var r=s.prof.qc;"string"==typeof r&&""!==r&&"0"!==r&&s.bf.set(e.VIA_QUIC),d&&s.bf.set(e.IPv6),l&&s.bf.set(e.FEO),"hidden"===m&&s.bf.set(e.VIS_HIDDEN),"visible"===m&&s.bf.set(e.VIS_VISIBLE),"prerendered"===m&&s.bf.set(e.VIS_PRERENDERED),c&&s.bf.set(e.QUERY_TRUNCATED),s.prof.origin===!0&&s.bf.set(e.RUM_AT_ORIGIN),s.onloadHasFired===!0&&s.bf.set(e.ONLOAD_HAS_FIRED),"true"===s.prof.ra&&s.bf.set(e.RUA_APPLIED),s.prof.akTT&&"O"!=s.prof.akTT&&s.bf.set(e.TXN_ENABLED)},s.findStartWebTiming=function(){var e=void 0,t=s.getNavTimingAPI();return"undefined"!=typeof t&&"undefined"!=typeof t.timing&&"undefined"!=typeof t.timing.navigationStart&&(e=r.match(/Firefox\/[78]\./i)?t.timing.unloadEventStart||t.timing.fetchStart:t.timing.navigationStart),e},s.onready=function(e){s.mark("onready",(new Date).getTime()),s.measure("t_onready","starttime","onready")},s.onload=function(e){s.mark("onload",(new Date).getTime()),s.autorun&&s.done()},s.addEventListener=function(e,r,n){return"undefined"!=typeof t.attachEvent?t.attachEvent("on"+e,r):t.addEventListener?t.addEventListener(e,r,n):void 0},s.getNavTimingAPI=function(){return t.performance||t.mozPerformance||t.msPerformance||t.webkitPerformance},s.init()}}(window);var i=2147483647}();
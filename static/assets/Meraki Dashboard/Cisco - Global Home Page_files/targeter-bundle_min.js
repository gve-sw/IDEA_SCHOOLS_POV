if(window.cdc===undefined){window.cdc={}}if(window.cdc.context===undefined){cdc.context=(function(m,d){var q="unknown";var u=["dev","stage","prod"];var t=["fdk-pstage","fdk-stage","fdk-devint","fdk-author-pstage"];var z=u.concat([q]);var c=["valid","anonymous","invalid"];var b={prod:["www[0-9]*","apps","cdx","cepx-active-prod[0-9]*","wemapp-(author|publish)-(prod[0-9]|nprd)[0-9]*-[0-9]*","www-(author|test|publish|author3)","www-(author|test|publish|author3)-nprd","wwwin-tools","cisco-apps","grs","investor","newsroom","origin-software","software","sso[0-9]*","cloudsso[0-9]*","tools","webapps","wwwin",".*.cloudapps",".*.cisco","^nic$"],stage:["apps-lt","apps-stage","cdx-stage","(cepx|ecmx)-(active|staging|wip)-(lt|stage)[0-9]*","fdk-author-lt","fdk-author3-lt","fdk-author-stage","fdk-author3-stage","fdk-author-pstage","fdk-author3-pstage","fdk-author-pstage3","(www(in)?-)?fdk-(publish-)?lt[0-9]*","(www(in)?-)?fdk-(publish-)?.?stage[0-9]*","wemapp-(author|publish)-.?stage[0-9]*-[0-9]*","software-lt","software-stage","sso-nprd[0-9]*","cloudsso-test[0-9]*","tools-lt","tools-stage","www-lt[0-9]*","www-(author-|publish-)*stage[0-9]*","webapps-lt","webapps-stage","wwwin-tools-(dev|stage|lt)","wwwin-stage",".*-stage.cloudapps",".*-lt.cloudapps"],dev:["apps-dev","cdx-dev","cepx-active-dev[0-9]*","ecmx-active-dev[0-9]*","fdk-(author-)?dev[0-9]*","fdk-(author3-)?dev[0-9]*","(www(in)?-)?fdk-(author-)?devint[0-9]*","(www(in)?-)?fdk-(author3-)?devint[0-9]*","wemapp-(author|publish)-(dev|devint|idev)[0-9]*-[0-9]*","software-dev","sso-idev[0-9]*","cloudsso-idev[0-9]*","tools-dev","www-(dev|idev)[0-9]*","localhost","webapps-dev","wwwin-dev",".*-dev.cloudapps",".*.cisco.com:4502"]};var l={writable:false,enumerable:false,configurable:false};var r=[];var y="unready";var o=function(){var C=new RegExp("^("+z.join("|").slice(0,-1)+")$");return(typeof cdcext!=="undefined"&&typeof cdcext.customEnvironment!=="undefined"&&cdcext.customEnvironment.match(C))};var p=function(){var C=m.location.host;var D=C.split(".")[0];return t.some(function(E){return D.match(E)!=null})};var n=function(){if(o()){return cdcext.customEnvironment}else{return w(m.location.host)}};var h=function(C){return new RegExp("^("+C.join("|")+")(\\.|:|$)")};var w=function(C){C=C.replace(/\.cisco\.com$|\.cisco$/i,"");var D={};u.forEach(function(E){D[E]=h(b[E])});return(function(F){var E=q;u.forEach(function(G){if(D[G].test(F)){E=(E===q)?G:E}});return E}(C))};var x=function(){return(document.querySelectorAll("#login-form").length)?true:false};var a=function(C){return c.indexOf(C)!==-1};var s=function(C){if(typeof C!=="function"){if(console!==d&&console.trace){console.log(arguments.callee.caller.name+": expecting a function, got a "+typeof callback);console.trace()}return true}return false};var B=function(C){if(s(C)){return}else{if(a(cdc.context.authStatus)){C(cdc.context.authStatus)}else{r.push(C)}}};var v=function(D){var C=cdc.context.authStatus;cdc.context.authStatus=D;if(!a(C)){r.forEach(function(E){E(D)})}};var g=function(D){if(!D){return}var E=D.split(".");var F=m;var C;var G;for(C=0;C<E.length;C++){G=E[C];if(typeof(F[G])!="object"){F[G]={}}F=F[G]}};var A=function(D,F){if(!F){F="cacheReset"}var E="?";if(D.match(/(ng-prod1|\?)/)){E="&"}var C=E+F+"=";return D+C+cdc.context.randomNumber()};var e=function(C){if(!C){C=1000}var E=Math.floor(Math.random()*C)+1;var D=(new Date()).getTime();var F=D+"-"+E;return F};var f={getConfigInfo:function(C,E){try{if(E===true){return JSON.parse(sessionStorage[C])}else{return JSON.parse(localStorage[C])}}catch(D){return false}},deleteConfigInfo:function(C,E){try{if(E===true){sessionStorage.removeItem(C)}else{localStorage.removeItem(C)}return true}catch(D){return false}}};var j={checkLoginQueue:r,authStatus:y,findEnvironment:n,matchEnvironment:w,isLoginPage:x,checkLogin:B,setAuthStatus:v,randomNumber:e,ensureNamespace:g,cacheBust:A,ls:f,UNKNOWN_ENVIRONMENT_KEY:q,KNOWN_ENVIRONMENT_KEYS:u,STANDARD_ENVIRONMENT_KEYS:z,USER_STATUSES:c,PATTERN_FRAGMENTS:b,FULL_WEM_ENV_LIST:t,matchesTrueWemEnv:p};Object.defineProperties(j,{UNKNOWN_ENVIRONMENT_KEY:l,KNOWN_ENVIRONMENT_KEYS:l,STANDARD_ENVIRONMENT_KEYS:l,USER_STATUSES:l,PATTERN_FRAGMENTS:l});return j})(window)}if(window.cdc===undefined){window.cdc={}}cdc.cookie=cdc.cookie||{setCookie:function(c){if(!c.cookieName){c={cookieName:c,cookieValue:arguments[1]};if(arguments.length>2){c.days=arguments[2]}}var b="";var f="";var a="";var h=parseInt(c.msecs);if(isNaN(h)&&c.days){h=c.days*24*60*60*1000}if(!isNaN(h)){var d=new Date();d.setTime(d.getTime()+h);b="; expires="+d.toUTCString()}if(c.path){f="; path="+c.path+";"}else{f="; path=/;"}if(c.domain){a="; domain="+c.domain}try{document.cookie=c.cookieName+"="+escape(c.cookieValue)+b+f+a}catch(g){return false}return true},getCookie:function(a){if(!a.cookieName){a={cookieName:a}}var b=cdc.cookie.unpackParamString(document.cookie,/\s*;\s*/);return b[a.cookieName]||""},deleteCookie:function(b){var c={},a;for(a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}c.msecs=c.days=-1;c.cookieValue="";return cdc.cookie.setCookie(c)},daysFutureToTimeMS:function(c){if(isNaN(parseInt(c))){return 0}var b=new Date();b.setTime(b.getTime()+((c)*24*60*60*1000));var a=Date.parse(b);return a},addCookieChip:function(a){if(!a.cookieName){a={cookieName:a,chipName:arguments[1],chipValue:arguments[2]}}var b=cdc.cookie.getCookie(a),c=cdc.cookie.unpackParamString(b);c[a.chipName]=a.chipValue;cdc.cookie.setCookie({cookieName:a.cookieName,cookieValue:cdc.cookie.packParamString(c),days:366})},extractCookieChip:function(a){if(!a.cookieName){a={cookieName:a,chipName:arguments[1]}}var b=cdc.cookie.getCookie(a),c=cdc.cookie.unpackParamString(b);return c[a.chipName]||""},crumbleCookieChip:function(a){if(!a.cookieName){a={cookieName:a,chipName:arguments[1]}}var c=cdc.cookie.getCookie(a),e=cdc.cookie.unpackParamString(c),b=e.hasOwnProperty(a.chipName),d;delete e[a.chipName];d=cdc.cookie.packParamString(e);if(!d){cdc.cookie.deleteCookie(a)}else{cdc.cookie.setCookie({cookieName:a.cookieName,cookieValue:d,days:366})}return b},packParamString:function(d,b){b=b||"&";var c=[],a;for(a in d){if(!d.hasOwnProperty(a)){continue}c.push(escape(a)+"="+escape(d[a]))}return c.join(b)},unpackParamString:function(f,j){j=j||"&";var e=f.split(j),c={},h,g,a,b,d;for(d=0;d<e.length&&(h=e[d]);d++){g=h.indexOf("=");if(g<0){continue}a=unescape(h.substring(0,g));b=unescape(h.substring(g+1));c[a]=b}return c}};cdc.cookie.newUser={newUserEndTime:168,cookieName:"cdc.cookie.newUser",updateUserVal:function(){var d;var a=cdc.cookie.getCookie({cookieName:this.cookieName});if(!a){d=this.setValidCookie()}else{var b=new Date();var c=b.getTime();if(a==0){d=0}else{if(a<c){d=this.endNewUser()}else{d=a}}}return d},setValidCookie:function(){var c=new Date();var d=c.getTime();var b=d+(1000*60*60*this.newUserEndTime);var a=1000*60*60*24*365*25;cdc.cookie.setCookie({cookieName:this.cookieName,cookieValue:b,msecs:a});return b},endNewUser:function(){var b=0;var a=1000*60*60*24*365*25;cdc.cookie.setCookie({cookieName:this.cookieName,cookieValue:b,msecs:a});return b}};document.addEventListener("DOMContentLoaded",function(){cdc.cookie.newUser.updateUserVal()});document.addEventListener("DOMContentLoaded",function(){cdc.cookie.setCookie({cookieName:"remainingLinks",cookieValue:"",path:"/",msecs:-1000})});cdc.sso=cdc.sso||new function(){var f="nosynch";f=cdc.context.findEnvironment();if(f!=="prod"&&f!=="stage"&&f!=="dev"){f="nosynch"}var p={prod:{oamValidate:window.location.protocol+"//sso.cisco.com/autho/apps/sso/validatessosession/cdc/cdcvalid.js",portalSync:window.location.protocol+"//www.cisco.com/cisco/psn/web/site/collab/sign.gif?",logout:"https://www.cisco.com/autho/logout.html?ReturnUrl=//www.cisco.com/web/fw/lo/logout.html",ssoCookieName:"cdcSsoTimer"},stage:{oamValidate:window.location.protocol+"//sso-nprd.cisco.com/autho/apps/sso/validatessosession/cdc/cdcvalid.js",portalSync:window.location.protocol+"//www-stage.cisco.com/cisco/psn/web/site/collab/sign.gif?",logout:"https://www-stage.cisco.com/autho/logout.html?ReturnUrl=//www-stage.cisco.com/web/fw/lo/logout.html",ssoCookieName:"cdcSsoTimerStage"},dev:{oamValidate:window.location.protocol+"//sso-nprd.cisco.com/autho/apps/sso/validatessosession/cdc/cdcvalid.js",portalSync:window.location.protocol+"//www-dev.cisco.com/cisco/psn/web/site/collab/sign.gif?",logout:"https://www-dev.cisco.com/autho/logout.html?ReturnUrl=//www-dev.cisco.com/web/fw/lo/logout.html",ssoCookieName:"cdcSsoTimerDev"}};this.idleTimer=600*60*1000;this.resynchInterval=29*60*1000;var o=50*1000;var n=false;this.authStatusIsSynced=n;var a=[];var m=cdc.context.ls.getConfigInfo("SsoConfig");var b=new Date();if(m&&m.expiry<b.getTime()){if(console){console.log("Deleting expired ssoConfig.  Values were:"+JSON.stringify(m)+"You must resave them if you need them.")}cdc.context.ls.deleteConfigInfo("SsoConfig");m=false}if(m){if(console){console.log("using your stored values, run SSO bookmark if you want to switch back to defaults");console.log(JSON.stringify(m))}f="localstored";p.localstored=m.localstored;this.idleTimer=(m.idleTimer&&parseInt(m.idleTimer)!="NaN")?parseInt(m.idleTimer):this.idleTimer;this.resynchInterval=(m.resynchInterval&&parseInt(m.resynchInterval)!="NaN")?parseInt(m.resynchInterval):this.resynchInterval}if(f!="nosynch"){var g=p[f].oamValidate;var q=p[f].portalSync;var h=p[f].logout;var c=(f=="localstored")?"cdcSsoTimerLocal":p[f].ssoCookieName;var l=new Image();function e(){if(!n){for(var t=0;t<a.length;t++){a[t]()}n=true;cdc.sso.authStatusIsSynced=n}}l.onload=function(){e()}}this.addReadyListener=function(t){if(typeof t!="function"){if(typeof console!="undefined"&&console.trace){console.log("cdc.sso.addReadyListener: expecting a function, got a "+typeof t);console.trace()}return}if(n||cdc.context.authStatus!="unready"){t()}else{a.push(t);cdc.context.checkLogin(function(u){if(u!="valid"){e()}})}};this.check=function(){if(f!="nosynch"){var u=cdc.cookie.extractCookieChip(c,"idleTimer");var v=new Date().getTime();var t=document.createElement("script");t.type="text/javascript";if(u>v){cdc.context.setAuthStatus("valid");this.initialSynch()}else{if(cdc.cookie.getCookie("ObSSOCookie")&&cdc.cookie.getCookie("ObSSOCookie").indexOf("loggedout")!=0){t.src=cdc.context.cacheBust(g);document.getElementsByTagName("head")[0].appendChild(t)}else{cdc.context.setAuthStatus("invalid")}}}};this.oamStatus=function(t){var u=t.userLogin;cdc.context.setAuthStatus(u);if(u=="valid"){cdc.sso.initialSynch()}else{cdc.sso.nonSynchable(u)}};this.initialSynch=function(){if(f!="nosynch"){var t=new Date().getTime();j({cookieName:c,chipName:"idleTimer",chipValue:t+cdc.sso.idleTimer});s();setTimeout("cdc.sso.keepSynched()",o)}};this.keepSynched=function(){var t=new Date().getTime();if(cdc.cookie.getCookie(c)){if(cdc.cookie.extractCookieChip(c,"idleTimer")<t){d()}else{s();setTimeout("cdc.sso.keepSynched()",o)}}};function s(){var t=new Date().getTime();var u=cdc.cookie.extractCookieChip(c,"resynchInterval");if(!u||u<=t){l.src=q+t;j({cookieName:c,chipName:"resynchInterval",chipValue:t+cdc.sso.resynchInterval})}else{e()}}function r(){if(cdc.cookie.getCookie(c)||cdc.context.authStatus!="invalid"){jQuery("body").append("<iframe src='"+h+"' style='height:0;width:0;' ></iframe>")}}function d(){r()}this.nonSynchable=function(t){if(t=="invalid"){r()}};function j(t){var u=cdc.cookie.getCookie(t),v=cdc.cookie.unpackParamString(u);v[t.chipName]=t.chipValue;cdc.cookie.setCookie({cookieName:t.cookieName,cookieValue:cdc.cookie.packParamString(v),domain:"cisco.com"})}};cdc.sso.staySynched=cdc.sso.initialSynch;cdc.sso.check();if(typeof cdc=="undefined"){var cdc={}}if(typeof cdc.userInfoDispatcher==="undefined"){cdc.userInfoDispatcher=new function(){var z="unknown";var A={dev:{CPS_AUTH_URL:"//mktcs-dev.cloudapps.cisco.com/visitor/profile",VPS_AUTH_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile",VPS_GUEST_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/virtualprofile",CINF_AUTH_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=wem",CINF_GUEST_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=wem",PHL_AUTH_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=partnerhelpline",PHL_GUEST_URL:"//cdcvps-dev.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=partnerhelpline",BLUEKAI:"//tags.bluekai.com/site/27647?ret=js&limit=1&jscb=bluekaiCallback",LOCALE_GUEST_URL:"//www.cisco.com/web/fw/co/i/s.gif?t="+Math.random(),PROFOUND_URL:"https://private-anon-9a204416c9-profoundbapi.apiary-proxy.com/?key=cisco-at-dev-8580b7fa345&ip=203.151.20.139&callback=profoundCallback"},stage:{CPS_AUTH_URL:"//mktcs-stage.cloudapps.cisco.com/visitor/profile",VPS_AUTH_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile",VPS_GUEST_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/virtualprofile",CINF_AUTH_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=wem",CINF_GUEST_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=wem",PHL_AUTH_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=partnerhelpline",PHL_GUEST_URL:"//cdcvps-stage.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=partnerhelpline",BLUEKAI:"//tags.bluekai.com/site/27647?ret=js&limit=1&jscb=bluekaiCallback",LOCALE_GUEST_URL:"//www.cisco.com/web/fw/co/i/s.gif?t="+Math.random(),PROFOUND_URL:"https://private-anon-9a204416c9-profoundbapi.apiary-proxy.com/?key=cisco-at-dev-8580b7fa345&ip=203.151.20.139&callback=profoundCallback"},prod:{CPS_AUTH_URL:"//mktcs.cloudapps.cisco.com/visitor/profile",VPS_AUTH_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile",VPS_GUEST_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/virtualprofile",CINF_AUTH_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=wem",CINF_GUEST_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=wem",PHL_AUTH_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/psn/virtualprofile?groupName=partnerhelpline",PHL_GUEST_URL:"//cdcvps.cloudapps.cisco.com/support/cdcvps/virtualprofile?groupName=partnerhelpline",BLUEKAI:"//tags.bluekai.com/site/27647?ret=js&limit=1&jscb=bluekaiCallback",LOCALE_GUEST_URL:"//www.cisco.com/web/fw/co/i/s.gif?t="+Math.random(),PROFOUND_URL:"https://bapi.profound.net/?key=cisco-at-0e8a181c345311e&callback=profoundCallback"}};var p=cdc.context.findEnvironment();if(A[p]==null){p="prod"}var c=3000;var J={AE:"en",AR:"es",AT:"de",AU:"en",BE:"en",BR:"pt",CA:"en",CH:"de",CL:"es",CN:"zh",CO:"es",CR:"es",CU:"es",CZ:"cs",DE:"de",DK:"da",DO:"es",EC:"es",EG:"ar",ES:"es",FI:"fi",FR:"fr",GB:"en",GR:"en",GT:"es",HK:"en",HN:"es",HU:"hu",ID:"en",IL:"en",IN:"en",IT:"it",JP:"ja",KR:"ko",LU:"fr",MX:"es",MY:"en",NI:"es",NL:"nl",NO:"no",NZ:"en",PA:"es",PE:"es",PH:"en",PL:"pl",PR:"es",PT:"pt",PY:"es",RO:"ro",RU:"ru",SA:"en",SE:"sv",SG:"en",SV:"es",TH:"th",TR:"tr",TW:"zh",UA:"ru",US:"en",UY:"es",VE:"es",VN:"vi",ZA:"en"};var K={cps:new b("cps",A[p].CPS_AUTH_URL,A[p].CPS_AUTH_URL,"contact"),vps:new b("vps",A[p].VPS_AUTH_URL,A[p].VPS_GUEST_URL,"response/attributes"),contactInfo:new b("contactInfo",A[p].CINF_AUTH_URL,A[p].CINF_GUEST_URL,"response/attributes"),locale:new G("locale",A[p].LOCALE_GUEST_URL,"X-Akamai-Edgescape"),phl:new b("phl",A[p].PHL_AUTH_URL,A[p].PHL_GUEST_URL,"response/attributes"),bluekai:new C("bluekai",A[p].BLUEKAI),eloqua:new g("eloqua"),profound:new C("profound",A[p].PROFOUND_URL)};var v=function(M){if(typeof performance!=="undefined"&&typeof performance.mark!=="undefined"){performance.mark(M)}};function g(M){this.callService=function(N,O){if(N.requiresWrappedResponse){N.params.profileUpdates.forEach(function(Q){if(Q.key===M){var P={};P[Q.key]=Q.value;O(P)}})}else{console.warn("WARNING: `getUserProfile` does not support requests for ",M,".")}}}function C(N,M){this.callService=function(O,W){if(O.requiresWrappedResponse){var U={state:O,callback:W};var V;var T=O.params.delayForData?"":" async";var P=function(Y){var X={};X[N]=U.state.params.parserFunctions[N](Y);U.state.params.callbackFunctions[N](X);U.callback(X);if(O.params.async){clearTimeout(V)}};var Q=function(){var X=document.getElementsByTagName("script")[0];var Y=document.createElement("script");Y.classList.add("asyncScript");Y.src=M;Y.id=N;X.parentNode.appendChild(Y,X)};window[N+"Callback"]=P;v(N+" injected");if(!O.params.async){document.write('<script id="'+N+'" type="text/javascript" src="'+M+'"'+T+"><\/script>")}else{Q();var R=O.params.timeoutPoint-Date.now();var S=(R>0)?R:1;V=setTimeout(function(){var X={};U.callback(X);v("UID timed out for "+N)},S)}}else{console.warn("WARNING: `getUserProfile` does not support requests for ",N,".")}}}var x=function(){var M={};var N=false;var O=0;var P=arguments.length;if(Object.prototype.toString.call(arguments[0])==="[object Boolean]"){N=arguments[0];O++}var R=function(S){for(var T in S){if(Object.prototype.hasOwnProperty.call(S,T)){if(N&&Object.prototype.toString.call(S[T])==="[object Object]"){M[T]=extend(true,M[T],S[T])}else{M[T]=S[T]}}}};for(;O<P;O++){var Q=arguments[O];R(Q)}return M};var e={};var j=new function(){var M=function(R,O,Q){var P=[];if(s.isStale(O)){P=Q.serviceNames}else{Q.serviceNames.forEach(function(S){if(R==null||R[S]==null){P.push(S)}})}return P};var N=function(Q,O){if(localStorage.getItem("userInfoDispatcher")!=null){var S=JSON.parse(localStorage.getItem("userInfoDispatcher"))}cookieInfo=(document.cookie.match(/^(?:.*;)? cdcUniqueKey=([^;]+)(?:.*)?$/)||[,null])[1];if(S!=null){if(cookieInfo==S.token&&cookieInfo!="none"){}else{s.clear()}}z=O;var P=s.getProfile(z);var T=M(P,O,Q);var R={params:Q,loginStatus:{value:O},response:{profileData:{},requests:{queuedServices:T,completed:[]}},requiresWrappedResponse:false};R.params.async=true;if(T.length>0){a(R)}else{L(P,Q.listOfDataFields,Q.callback)}};this.process=function(P){var O=w();if(O.requiresLoginCheck){cdc.context.checkLogin(function(){N(P,O.value)})}else{N(P,O.value)}}};function u(N){var M=[];N.forEach(function(Q){var O=Q.split(".");var P=O&&O.length>0?O[0]:"";if(P in K){M.push(P)}});return M}function w(){var M={value:null,requiresLoginCheck:false};z=cdc.context.authStatus==="valid"?"loggedIn":z;if(z!=="unknown"){M.value=z}else{if(cdc.context.isLoginPage()){M.value="anonymous"}else{M.value=cdc.context.authStatus==="valid"?"loggedIn":"anonymous";M.requiresLoginCheck=true}}return M}var m=function(P,M,O){var N=function(S,Q,R){return(!!S&&!!S[Q]&&S[Q].constructor===Object&&!!R&&!!R[Q]&&Object.keys(R[Q]).length===0&&R[Q].constructor===Object)};O=o(M,O);if(!N(P,M,O)){return x(P||{},O)}else{return P}};function q(N,O,M){K[N].callService(O,function(P){if(O.requiresWrappedResponse){O.response.profileData=m(O.response.profileData,N,P);O.response.hasData=true;if(M){O.response.isComplete=true}}r(N,P,O)})}function o(M,N){if(N==null||I(N)){N={};N[M]={}}return N}var d=function(O,N,P){var M=e[O]||[];if(P.response.requests.completed.length>0){P.response.requests.completed.forEach(function(S){var R=E(S);M.forEach(function(U){var T=U.serviceNames.indexOf(R);U.serviceNames.splice(R,1)})})}var Q=function(S){var T=S[S.length-1];var R=T.serviceNames.indexOf(O);if(R!==-1){T.serviceNames.splice(R,1);if(T.serviceNames.length===0){S.pop();if(P.requiresWrappedResponse){y(P,P.params.listOfDataFields.join(", "))}else{L(N,P.params.listOfDataFields,T.callback)}if(S.length>0){Q(S)}}else{Q(S)}}};if(M.length>0){Q(M)}};function r(N,P,O){var M=s.getProfile(z);M=m(M,N,P);s.saveProfile(M,z);d(N,M,O)}var a=function(N){var M=N.response.requests.queuedServices;if(M.length===0){y(N,"no queued services")}else{M.forEach(function(Q,P){var O=(P===M.length-1);if(e[Q]==null){e[Q]=[N.params];if(typeof(N.params.delayForData)!=="undefined"){if(!N.params.delayForData){y(N,Q)}}q(Q,N,O)}else{e[Q].push(N.params)}})}};function I(M){if(M==null){return true}for(k in M){if(M.hasOwnProperty(k)){return false}}return true}function L(N,O,P){var M={};if(N){if(O instanceof Array&&O.length>0){M=H(N,O)}}P(M)}function H(O,N){N=N||[];O=O||{};var M={};N.forEach(function(P){var Q=P.split(/\./);M[Q[0]]=O[Q[0]]});return M}this.getUserProfile=function(M){M=M||{};if(typeof M.callback!=="function"){if(console){console.log("cdc.userInfoDispatcher.getUserProfile: second parameter must be a function, but it is a "+typeof(callback))}return}var N=x(M,{serviceNames:u(M.listOfDataFields)});j.process(N)};this.clearCache=function(){s.clear()};function D(O,N){var M=N.response;N.params.listOfDataFields.forEach(function(P){var Q=n(O,P);if(typeof Q!=="undefined"){M.hasData=true;F(M.profileData,P,Q);M.requests.queued.push(P)}else{M.isComplete=false;M.requests.queued.push(P)}});return M}var n=function(R,P){var Q=R;var N;var M=P.split(".");var O=M[M.length-1];M.forEach(function(S){if(S===O){N=Q[S]}else{Q=Q[S]}});return N};function F(O,M,N){M=M.split(".");while(M.length>1){O=O[M.shift()]}return O[M.shift()]=N}function h(P,N){var M=[];function O(S,R){R=R||"";var Q=R;Object.keys(S).forEach(function(T){if(typeof S[T]!=="object"){Q=R+"."+T;Q=(Q[0]===".")?Q.slice(1):Q;M.push(Q)}else{O(S[T],R+"."+T)}})}O(P,N);return M}function E(M){return M.split(".")[0]}function t(N){var M=N;M.requests.queued.forEach(function(O){var P=E(O);if(M.requests.queuedServices.indexOf(P)===-1){M.requests.queuedServices.push(P)}});return M}var l=function(M,N){if(M.loginStatus.requiresLoginCheck){cdc.context.checkLogin(function(){N(M)})}else{N(M)}};this.request=function(N){v("UID request for "+N.listOfDataFields.join(", "));var M={params:N,loginStatus:w(),response:{hasData:false,isComplete:true,profileData:{},requests:{queuedServices:[],received:N.listOfDataFields,completed:[],queued:[]}},requiresWrappedResponse:true};M.params.serviceNames=u(M.params.listOfDataFields);var O=function(){z=M.loginStatus.value;if(s.isStale(M.loginStatus.value)){B(M)}else{f(M)}};l(M,O)};var y=function(N,M){v("UID responded for "+M);N.params.callback(N.response)};function f(M){var N=s.getProfile(M.loginStatus.value);M.response=D(N,M);M.response=t(M.response);a(M)}function B(M){M.response.hasData=false;M.response.isComplete=false;M.response.requests.queued=M.params.serviceNames.slice(0);M.response=t(M.response);a(M)}var s=new function(){var O="userInfoDispatcher";var M=6*60;this.saveProfile=function(R,P){var U="cdcUniqueKey";var Q=(document.cookie.match(/^(?:.*;)? cdcUniqueKey=([^;]+)(?:.*)?$/)||[,null])[1];if(Q==null||Q=="none"){Q=Math.random().toString(20).slice(2);document.cookie=U+"="+Q+";domain=.cisco.com;path=/"}try{var T=JSON.stringify({profile:R,authState:P,created:new Date().getTime(),token:Q});localStorage.setItem(O,T)}catch(S){}};this.getProfile=function(P){try{var R=JSON.parse(localStorage.getItem(O));return(R&&!N(R,P))?R.profile:null}catch(Q){return null}};this.isStale=function(S){var P=true;try{var R=JSON.parse(localStorage.getItem(O));P=R==null||N(R,S)}catch(Q){}return P};this.clear=function(){try{localStorage.removeItem(O)}catch(P){}};function N(Q,P){if(!Q||Q.authState!=P){return true}if(Q.created<new Date().getTime()-M*60000){return true}return false}};function b(P,Q,N,M){this.callService=function(V,ac){var ae={};var W=(V.loginStatus.value==="anonymous")?N:Q;var X;var Y;var ab;var ad=new XMLHttpRequest();if(!V.params.async){ad.open("GET",W,false)}else{X=V.requiresWrappedResponse?(V.params.timeoutPoint-Date.now()):c;Y=(X>0)?X:1;ab=setTimeout(aa,Y);ad.open("GET",W,true);ad.timeout=Y}ad.withCredentials=true;ad.onreadystatechange=function(){var ah=4;var ag=200;if(ad.readyState===ah){clearTimeout(ab);if(ad.status===ag){var af=JSON.parse(ad.responseText);U(af,ae);ac(ae)}else{U(null,ae);ac({})}}};try{ad.send(null)}catch(Z){ac({})}function aa(){v("UID timed out for "+P);ad.abort();U(null,ae);ac(ae)}};function U(W,V){if(W==null){return true}var Y=M.split("/");for(var X=0,Z=Y.length;X<Z&&W!=null;X++){W=W[Y[X]]}if(W==null){return}O(P,W,V);return true}function O(Y,X,W){if(typeof X==="object"&&X.hasOwnProperty("name")){T(Y,X,W)}else{if(typeof X==="object"){for(var V in X){T(Y,X[V],W)}}}}function T(Z,W,Y){Y=R(Y,Z);if(W.name!==undefined&&W.value!==undefined){if(typeof W.value==="string"){Y[S(W.name)]=W.value}else{if(W.value.constructor===Array){var aa=W.value;for(var V=0,X=aa.length;V<X;V++){if(typeof aa[V]!="string"){O(S(W.name),W.value,Y)}else{Y[S(W.name)]=W.value}}}else{if(typeof W.value==="object"){O(S(W.name),W.value,Y)}}}}else{}}function R(W,V){if(typeof W!=="object"){W={}}if(typeof W[V]!=="object"){W[V]={}}return W[V]}function S(V){return V.toLowerCase().replace(/\s/g,"_")}}function G(N,P,Q){var M;var O=function(){var U;var R;if(window.XMLHttpRequest){U=new XMLHttpRequest();if(U.withCredentials===undefined&&window.XDomainRequest){R=new XDomainRequest()}}else{if(window.ActiveXObject){try{U=new ActiveXObject("Msxml2.XMLHTTP")}catch(V){try{U=new ActiveXObject("Msxml3.XMLHTTP")}catch(T){try{U=new ActiveXObject("Microsoft.XMLHTTP")}catch(S){throw new Error("XML HTTP request not implemented")}}}}else{throw new Error("XML HTTP request not implemented")}}return U};this.callService=function(X,Y){var R=X.loginStatus.value;var W=O();W.onreadystatechange=function(){if(W.readyState){if(W.readyState===4){clearTimeout(M);if(W.status===200){var aa=V(W,Q);if(aa&&aa.locale){var Z=aa.locale.country_code;var ab=J[Z];if(!ab){aa.locale.lang_unknown=true;ab="en"}aa.locale.language_code=ab}Y(aa)}}else{if(W.status>0){}else{Y({})}}}else{}};function V(ad,ac){try{responseHeader=ad.getResponseHeader(ac);responseHeader=responseHeader.split(",");var ab={};ab[N]={};for(i in responseHeader){var Z=responseHeader[i];var aa=responseHeader[i].split("=");var Z=aa[0].toString();ab[N][Z]=aa[1]}return ab}catch(ae){return null}}try{if(!X.params.async){W.open("GET",P+"?t="+Math.random(),false)}else{var U=X.requiresWrappedResponse?(X.params.timeoutPoint-Date.now()):c;var S=(U>0)?U:1;M=setTimeout(function(){v("UID timed out for "+N);W.abort();Y({})},S);W.open("GET",P+"?t="+Math.random());W.timeout=S}W.send(null)}catch(T){Y({})}}}}()}var Targeter=(function(a2,K){var u=false;var aj={adobeLibraryLoaded:false,visitorLibraryLoaded:false,timedOut:false};var at={};var G={};var O={};var f={};var a7;var y;var aR=[];var aF;var af;var L=Date.now();var bb=a2.location.host;var s="www.cisco.com";var bc=["hidden","spinner","obscured","targetable"];var al=bc.map(function(bi){return new RegExp("\\b"+bi+"\\b")});var b={timeoutInitialized:{label:"Targeter initialized the timeout value",isTimeout:false},timeoutPending:{label:"Targeter did not timeout",isTimeout:false},timeoutNotReachedForAdobeRequest:{label:"Targeter made successful Target request",isTimeout:false},timeoutBeforeDomInteractive:{label:"Targeter timed out before domInteractive",isTimeout:true,forcePageReveal:true,ensureRegionalMboxVisibility:true},timedOutBeforeAdobeLibrary:{label:"Targeter timed out before at.js",isTimeout:true,forcePageReveal:true,ensureRegionalMboxVisibility:true},timedOutBeforeAdobeRequests:{label:"Targeter timed out before any mbox requests",isTimeout:true,forcePageReveal:true,ensureRegionalMboxVisibility:true},timeoutReachedForAdobeRequest:{label:"request timed out for {mboxName}",isTimeout:true,ensureRegionalMboxVisibility:true}};var a3={typeDefaultAndPlugin:[{plugins:["foo","bar"],type:"default"}],typeDefaultAndPlugin2:[{plugins:["foo","bar"]},{type:"default"}],typeDefault:[{type:"default"}],plugin:[{plugins:["foo","bar"]}],empty:[{}],action:[{type:"actions",content:[{action:"customCode",selector:"HEAD",content:"foo",cssSelector:"$cssSelector"}]}],};var a4={none:{timeoutBlackList:[],preventSafetyTimeout:false},timeoutBeforeDomInteractive:{timeoutBlackList:[],preventSafetyTimeout:false},timeoutBeforeAdobeLibrary:{timeoutBlackList:["timeoutBeforeDomInteractive"],preventSafetyTimeout:true},timeoutBeforeAdobeRequests:{timeoutBlackList:["timeoutBeforeDomInteractive","timedOutBeforeAdobeLibrary"],preventSafetyTimeout:true},timeoutReachedForEveryAdobeRequest:{timeoutBlackList:["timeoutBeforeDomInteractive","timedOutBeforeAdobeLibrary","timedOutBeforeAdobeRequests"],preventSafetyTimeout:true,targetGlobalSettingsTimeoutOverride:1,timeRemainingOverride:1},timeoutReachedForSomeAdobeRequest:{timeoutBlackList:["timeoutBeforeDomInteractive","timedOutBeforeAdobeLibrary","timedOutBeforeAdobeRequests"],preventSafetyTimeout:true,timeRemainingOverride:1,overriddenIndex:0}};var ad={hideMethod:"string",safetyTimeout:"number",useDomain:"string",accountName:"string",async:"boolean",killSwitch:"string",forcedOffer:"string",delayForData:"boolean"};var x=Object.keys(ad);var W=["jusst","bill","ivan","butternut","stage","dev","azukibean"];var a1=["b2me","demand","offers","search","searchx","discover","blogs","communities","local"];var p=["REQUEST_FAILED","CONTENT_RENDERING_SUCCEEDED","CONTENT_RENDERING_FAILED"];var F=["REQUEST_SUCCEEDED"].concat(p);var H=["serverDomain","clientCode","imsOrgId","crossDomain"];var D={PROD:{clientCode:"ciscosystemsinc",imsOrgId:"B8D07FF4520E94C10A490D4C@AdobeOrg",serverDomain:"ciscosystemsinc.tt.omtrdc.net",crossDomain:"enabled"},TEST:{clientCode:"testciscosystemsinc",imsOrgId:"C98E4C4E572079057F000101@AdobeOrg",serverDomain:"testciscosystemsinc.tt.omtrdc.net",crossDomain:"disabled"}};var aX={none:{bodyHidingEnabled:false,injectsCss:false},page:{bodyHidingEnabled:true,injectsCss:false,opacity:"0"},pageOpaque:{bodyHidingEnabled:true,injectsCss:false,opacity:"0.25"},elements:{bodyHidingEnabled:false,injectsCss:true}};var aN=function(bj){var bi=[];var bk=[];bj.campaigns.forEach(function(bl){var bm=bl.campaign;bk.push(bm);bl.categories.forEach(function(bo){var bn=bm+"."+bo.categoryID;bi.push(bn)})});return{categories:bi.join(","),campaigns:bk.join(",")}};var m=function(bi){return bi};var aJ={loadVps:{isActive:true,requiresUidRequest:true,services:[{key:"vps"}]},loadCps:{isActive:true,requiresUidRequest:true,services:[{key:"cps"}]},loadLocale:{isActive:true,requiresUidRequest:true,services:[{key:"locale"}]},loadBlueKai:{isActive:true,requiresUidRequest:true,services:[{key:"bluekai",parser:aN,callback:function(){o("bluekai executed","uidEvent",{subtype:"targeterCallbackExecuted",markPerformance:true})}}]},loadProfound:{isActive:true,requiresUidRequest:true,services:[{key:"profound",parser:m,callback:function(){o("profound executed","uidEvent",{subtype:"targeterCallbackExecuted",markPerformance:true})}}]},loadEloqua:{isActive:true,requiresUidRequest:false,services:[{key:"eloqua",injectedVariables:[{key:"title",value:"contactTitle"},{key:"industry",value:"contactIndustry"},{key:"leadScore",value:"contactLS"},{key:"jobLevel",value:"contactJL"},{key:"businessStatus",value:"contactBS"},{key:"topicOfInterest",value:"contactTOI"}]}]},loadDunAndBradstreet:{isActive:false,requiresUidRequest:false,services:[{key:"dunAndBradstreet"}]}};var bh={async:true,delayForData:false,hideMethod:"none",loadBlueKai:false,loadProfound:false,loadCps:true,loadDunAndBradstreet:false,loadEloqua:false,loadLocale:true,loadVps:true,killSwitch:"none",forcedOffer:"none",safetyTimeout:4000};var l=function(bi,bj){switch(ad[bi]){case"boolean":return(bj==="false"||bj==="0")?false:true;case"number":return Number(bj);default:return bj}};var U=function(bj,bi){var bk=ah(bi);if(typeof bk!=="undefined"){bj[bi]=l(bi,bk);Targeter.internals.config.queryParams[bi]=bk}return bj};var ah=function(bn,bi){var bk=a2.location.search.substring(1);var bl=bk.split("&");for(var bj=0;bj<bl.length;bj++){var bm=bl[bj].split("=");if(bm[0]==bn){return bm[1]}}return bi};var ap=function(bi){return(bi.some(function(bj){return bb.indexOf(bj+".")>-1}))};var ai=function(bi,bj){return"//"+bi+bj};var w=function(bi){if(bi===K){return""}else{return bi}};var o=function(bj,bn,bo){bo=bo||{};if(Targeter.isInDebugMode){var bm=S(at.safetyTimeout,L);var bi={label:bj,type:bn,timestamp:Date.now(),elapsed:bm.elapsed,remaining:bm.remainingActual,remainingAdjusted:bm.remainingAdjusted,remainingForXhrTimeout:bm.remainingForXhrTimeout};a6(bi,bo);Targeter.internals.timeline.push(bi)}var bk=function(){return aB(performance)&&aB(performance.mark)};var bl=function(bp){return aB(bp.markPerformance)&&bp.markPerformance};if(bk()&&bl(bo)){performance.mark(bj)}};var E=function(bi){o(bi,"targeterEvent",{subtype:"performanceMark",markPerformance:true})};var a6=function(){Object.assign=(typeof Object.assign!="function")?ag:Object.assign;Object.assign.apply(null,arguments)};var ax=function(bj,bi){bi.forEach(function(bk){bj=U(bj,bk)});if(!Targeter.isInDebugMode){delete bj.killSwitch;delete bj.forcedOffer}return bj};var ar=function(bi,bj){Object.keys(bj).forEach(function(bk){if(typeof bi[bk]!=="undefined"){var bl=bj[bk];bi[bk]=bl(bi[bk])}});return bi};var ag=function(bl){if(bl==null){throw new TypeError("Cannot convert undefined or null to object")}bl=Object(bl);for(var bi=1;bi<arguments.length;bi++){var bk=arguments[bi];if(bk!=null){for(var bj in bk){if(Object.prototype.hasOwnProperty.call(bk,bj)){bl[bj]=bk[bj]}}}}return bl};var g=function(){return[].slice.call(document.getElementsByClassName("mboxDefault"))};var aw=function(){var bi=g();var bj=bi[bi.length-1];return bj};var N=function(bi,bj){bi.id=bj;return bj};a2.mboxCreate=function(){var bi=aw();var bk=N(bi,arguments[0]);var bj={arguments:[].slice.call(arguments),div:bi};aR.push(bj)};var aV=function(bi){bi.revealRegionalMboxes=true;if(aB(bi.timeout)){document.addEventListener("DOMContentLoaded",function(bj){setTimeout(function(){I(bi)},bi.timeout)})}else{I(bi)}};var Z=function(bi){if(am(bi)){aq();a7=Date.now()}};var bf=function(bi){return D[z(bi).toUpperCase()]};var z=function(bi){return(bi==="test")?"test":"prod"};var q=function(bi){return JSON.parse(JSON.stringify(bi))};var aH=function(){var bi="\n.targetable, .mboxDefault, .targetable.hidden { visibility:hidden; }";bi+="\n.targetable { position:relative; }";bi+="\n.targetable.spinner > :not(.spinner-box) { opacity: 0 !important; }";bi+="\n.targetable.spinner > div.spinner-box { position: absolute; top: 50%; left: 50%;transform: translateX(-50%) translateY(-50%); }";bi+="\ndiv.spinner-box > div.spinner-wheel { position:relative; visibility:visible; width:4em; height:4em; border-radius:100%; border:.2em solid #cccccc; border-left-color:#049fd9; -webkit-animation: load 1.1s infinite linear; animation: load 1.1s infinite linear; } @-webkit-keyframes load{ 0%{ -ms-transform: rotate(7deg); -webkit-transform: rotate(7deg); transform: rotate(7deg); } 100%{ -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg); } } @keyframes load{ 0%{ -ms-transform: rotate(7deg); -webkit-transform: rotate(7deg); transform: rotate(7deg); } 100%{ -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg); } }";bi+='\n.targetable.obscured { visibility:visible; opacity:.1; transition: opacity 2s ease-in-out; -moz-transition: opacity 2s ease-in-out; -webkit-transition: opacity 2s ease-in-out; filter: blur(5px); -webkit-filter: blur(5px); -moz-filter: blur(5px); -o-filter: blur(5px); -ms-filter: blur(5px); filter: url(\'data:image/svg+xml;utf9,<svg%20version="1.1"%20xmlns="http://www.w3.org/2000/svg"><filter%20id="blur"><feGaussianBlur%20stdDeviation="3"%20/></filter></svg>#blur\'); filter: progid: DXImageTransform.Microsoft.Blur(PixelRadius=\'5\'); -webkit-transition: 2s -webkit-filter linear; -moz-transition: 2s -moz-filter linear; -o-transition: 2s -o-filter linear;}';bi+="\n";return bi};var P=function(){var bj=aH();var bi=document.createElement("style");bi.type="text/css";bi.id="targetable-styles";if(bi.styleSheet){bi.styleSheet.cssText=bj}else{bi.appendChild(document.createTextNode(bj))}document.getElementsByTagName("head")[0].appendChild(bi);o("injected css","targeterEvent")};var Q=function(){o("visitorapi.js injected","targeterEvent",{subtype:"scriptInjectionStarted",markPerformance:true});aI(A("/etc/designs/cdc/fw/j/VisitorAPI.js"),function(){aj.visitorLibraryLoaded=true;o("visitorapi.js executed","targeterEvent",{subtype:"scriptInjectionFinished",markPerformance:true})},"visitorTag")};var am=function(bj){o("tested readiness to load Target library","targeterEvent",{subtype:"readinessTested",source:bj});var bi=typeof(visitor)!=="undefined"&&aj.visitorLibraryLoaded&&typeof(adobe)==="undefined"&&!aj.adobeLibraryLoaded&&!aj.timedOut;if(bi){Object.keys(aJ).forEach(function(bk){aJ[bk].services.forEach(function(bl){if(at[bk]){bi=bi&&(G[bl.key]!==K)}})})}return bi};var S=function(bn,bo){var bl=a4[at.killSwitch||"none"].preventSafetyTimeout;var bj=Date.now()-bo;var bk=(bn||Targeter.defaults.safetyTimeout)-bj;var bm=bk>0?bk:1;var bi=bl?10000:bm;return{elapsed:bj,remainingActual:bk,remainingAdjusted:bi,remainingForXhrTimeout:bm}};var aG=function(bi){return Object.keys(bi).length===0&&bi.constructor===Object};var aB=function(bj,bi){var bl=typeof bj!=="undefined";var bk=typeof bi!=="undefined";return bk?bi:bl};var J=function(bj){var bi=false;bj.forEach(function(bl){var bk=(aB(bl.type)&&bl.type==="actions"&&aB(bl.content));bi=bi||bk});return bi};var X=function(bm,bn,bl){var bk=J(bm);var bj=bn==="target-global-mbox";var bi=bj&&!bk;return{subtype:"adobeRequestSucceeded",offers:bm,triggersRendering:bk,isGlobal:bj,mbox:bn,timeout:bl,revealsTargetableElements:bi}};var bd=function(bi,bj){adobe.target.applyOffer({mbox:bj,selector:"#"+bj,offer:bi})};var ac=function(bj,bl,bi){var bk=X(bj,bl,bi);o("adobe request succeeded","adobeTargetEvent",bk);bd(bj,bl);if(bk.revealsTargetableElements){I({source:"getAdobeTargetOffer ("+bl+")",timeout:bi})}};var bg=function(bi){if(Targeter.isInDebugMode){var bj=at.forcedOffer;bi=bj==="none"?bi:a3[bj]}return bi};var aA=function(bj,bi){adobe.target.getOffer({mbox:bj,timeout:bi,success:function(bk){bk=bg(bk);ac(bk,bj,bi);Y("1","getAdobeTargetOffer (success callback)")},error:function(){Y("1","getAdobeTargetOffer (error callback)")}})};var aL=function(bk,bl){var bn=a4[at.killSwitch]||"";var bm=Number(bn.targetGlobalSettingsTimeoutOverride);if(bm>0){targetGlobalSettings.timeout=bm}var bi=Number(bn.timeRemainingOverride);var bj=typeof bn.overriddenIndex!=="undefined";if(bi>0){if(bj){return(bn.overriddenIndex===bl)?1:bk}else{return 1}}else{return bk}};var aZ=function(bi){a2.targetGlobalSettings.enabled=true;a2.targetGlobalSettings.timeout=bi;aK("timeoutPending");aj.adobeLibraryLoaded=true};var aT=function(bi){return !!document.getElementById(bi)};var ba=function(){o("ensured visibility of present and future regional mboxes","targeterEvent",{subtype:"regionalMboxesRevealed"});R();a2.mboxDefine=function(){};a2.mboxCreate=function(){var bi=aw();var bk=N(bi,arguments[0]);var bj={source:"disabledMboxCreate",revealRegionalMboxes:true,regionalMboxId:bk};I(bj)}};var aW=function(bi){aR.forEach(function(bk,bj){var bm=bk.arguments[0];var bl={};bk.arguments.slice(1).forEach(function(bn){var bo=bn.split("=");bl[bo[0]]=bo[1]});aA(bm,aL(bi,bj))})};var aq=function(){var bi=S(at.safetyTimeout,L).remainingAdjusted;if(bi>1&&at.killSwitch!=="timeoutBeforeAdobeLibrary"){aZ(bi);o("at.js injected","targeterEvent",{subtype:"scriptInjectionStarted",markPerformance:true,message:"loadTargetLibrary() was called with time remaining"});aI(A("/c/dam/cdc/j/at.js"),function(){var bj={subtype:"scriptInjectionFinished",markPerformance:true};if(Targeter.isInDebugMode){bj.bodyStyleTagExists=aT("at-id-body-style");bj.targetableStylesTagExists=aT("targetable-styles")}o("at.js executed","targeterEvent",bj);var bk=S(at.safetyTimeout,L).remainingForXhrTimeout;if(at.killSwitch!=="timeoutBeforeAdobeRequests"&&bi>1){aK("timeoutPending");clearInterval(af);bk=aL(bk);aA("target-global-mbox",at.killSwitch==="timeoutReachedForSomeAdobeRequest"?1000000:bk);aW(bk)}else{aK("timedOutBeforeAdobeRequests")}a9();F.forEach(function(bm){var bl=bm.toLowerCase().replace(/_/g," ");adobe.target.ext.subscribe(adobe.target.event[bm],function(bn,bo){o(bm+" for "+bo.mbox,"adobeTargetEvent",{subtype:"eventFired",targetEvent:bn,targetDetails:bo,mboxId:bo.mbox,markPerformance:true});if(bm==="REQUEST_FAILED"&&bo.message==="timeout"){aK("timeoutReachedForAdobeRequest",bo.mbox)}if(bm==="REQUEST_SUCCEEDED"){aK("timeoutNotReachedForAdobeRequest",bo.mbox)}});aa(bm,bl)})},"target")}else{aK("timedOutBeforeAdobeLibrary")}};var aa=function(bj,bi){if(p.indexOf(bj)>=0){adobe.target.ext.subscribe(adobe.target.event[bj],function(bk,bl){if(bl.mbox==="target-global-mbox"){I({source:"registerCleanUpForTargetEvent"})}})}};var a9=function(){adobe.target.registerExtension({name:"subscribe",modules:["dom"],register:function(bi){return function(bj,bk){bi.find(document).on(bj,bk)}}})};var a0=function(){var bi=document.getElementById("at-id-body-style");if(bi!==null){bi.parentNode.removeChild(bi)}};var aQ=function(bi){return[].slice.call(document.querySelectorAll(bi))};var aC=function(bi,bj){bi.forEach(function(bk){bj.forEach(function(bl){bk.className=bk.className.replace(bl,"")})})};var r=function(bi){bi.forEach(function(bj){bj.parentNode.removeChild(bj)})};var be=function(){var bi=aQ(".targetable");var bj=aQ(".spinner-box");aC(bi,al);r(bj)};var C=function(bi){return(bi.toLowerCase()==="true"||bi==="1")?true:false};var aY=function(){var bi=ah("debugTargeter",false);bi=(typeof bi==="string")?C(bi):bi;Targeter.isInDebugMode=bi};var A=function(bi){if(typeof at.useDomain!=="undefined"&&at.useDomain!==""){o("set domain using query parameter value","targeterEvent",{subtype:"setDomain"});bi=ai(at.useDomain,bi)}else{if(ap(a1)){o("set domain using absolute path whitelist","targeterEvent",{subtype:"setDomain"});bi=ai(s,bi)}}return bi};var aM=function(bj){var bi="prod";if(bj&&bj.accountName&&(typeof bj.accountName!=="undefined")){o("set target account using configuration","targeterEvent",{subtype:"setTargetAccount"});bi=bj.accountName.toLowerCase()}else{var bk=W.some(function(bl){return bb.indexOf(bl)>-1});if(bk){o("set target account using whitelist","targeterEvent",{subtype:"setTargetAccount"});bi="test"}}ao(bf(bi));bj.accountName=z(bi)};var ao=function(bi){o("updated targetGlobalSettings","targeterEvent",{subtype:"targetGlobalSettingsUpdated",message:"Here, we set the properties based on the active account (test or prod)."});H.forEach(function(bj){a2.targetGlobalSettings[bj]=bi[bj]})};var t=function(bi,bj){bi.style.visibility=bj};var R=function(bj){if(bj){t(document.getElementById(bj),"visible")}else{var bi=g();bi.forEach(function(bk){t(bk,"visible")})}};var T=function(bo,bp){var bk=document.getElementById(bo);if(!!bk){var bn=bk.innerHTML;var bl=bn.replace(/\s/g,"").replace(/\\"/g,'"');bn=bp;var bm=bn.replace(/\s/g,"");var bj=bl===bm;var bi={subtype:"tagUpdated",tagId:bo,contentMatches:bj};if(!bj){bi.content={original:bl,updated:bm}}o("updated tag","targeterEvent",bi)}};var Y=function(bi,bj){document.documentElement.style.opacity=bi;o("set page opacity","targeterEvent",{subtype:"pageOpacitySet",opacity:bi,source:bj,})};var ay=function(bj){var bi=bj.bodyHidingEnabled?bj.opacity:1;Y(bi,"applyOpacityForHideMethod");return bi};var aO=function(bi){var bk=aX[bi];var bj=aX[bh.hideMethod];return aB(bk)?bk:bj};var aD=function(bj){var bk=aO(bj);if(bk.injectsCss){P()}var bi=ay(bk);o("applied synchronous hide method","targeterEvent",{subtype:"synchronousHideMethodApplied",method:bk,methodKey:bj,opacity:bi||"",injectsCss:bk.injectsCss,})};var ae=function(){return a2.self!=a2.top};var aS=function(bi){if(!at.async){aD(bi)}else{T("targetable-styles",aH())}if(ae()){setTimeout(function(){I({source:"applyHideMethod (isIFramed)"})},3000)}};var e=function(){var bi=ah("journeyStep");if(aB(bi)){G.journeyStep=bi}};var aP=function(){var bi=[];Object.keys(aJ).forEach(function(bj){if(!aJ[bj].requiresUidRequest&&at[bj]){var bk={};aJ[bj].services.forEach(function(bl){bk.key=bl.key;var bm={};bl.injectedVariables.forEach(function(bn){bm[bn.key]=w(a2[bn.value])});bk.value=bm;bi.push(bk)})}});return bi};var aE=function(){var bi={listOfDataFields:[],parserFunctions:{},callbackFunctions:{}};Object.keys(aJ).forEach(function(bj){if(aJ[bj].isActive&&at[bj]){aJ[bj].services.forEach(function(bk){bi.listOfDataFields.push(bk.key);if(typeof bk.parser!=="undefined"){bi.parserFunctions[bk.key]=bk.parser}if(typeof bk.callback!=="undefined"){bi.callbackFunctions[bk.key]=bk.callback}})}});return bi};var an=function(){o("made UID request","targeterEvent",{subtype:"targeterMadeUidRequest",authStatusIsSynced:cdc.sso.authStatusIsSynced});var bi=aE();Targeter.uidParams={async:at.async,timeoutPoint:L+Number(at.safetyTimeout),listOfDataFields:bi.listOfDataFields,callback:a5,delayForData:at.delayForData,parserFunctions:bi.parserFunctions,callbackFunctions:bi.callbackFunctions,profileUpdates:aP()};cdc.userInfoDispatcher.request(Targeter.uidParams)};var v=function(bi){var bk=(localStorage&&localStorage.userInfoDispatcher)?localStorage.userInfoDispatcher:"{}";Targeter.internals.uidCallbackStates=Targeter.internals.uidCallbackStates||[];var bj={response:JSON.parse(JSON.stringify(bi)),profile:JSON.parse(JSON.stringify(G)),lsUID:JSON.parse(bk)};Targeter.internals.uidCallbackStates.push(bj)};var a5=function(bi){Targeter.uidParams.listOfDataFields.forEach(function(bj){G[bj]=bi.profileData[bj]||{}});if(y){v(bi)}Z("uidCallback")};var ak=function(bj,bm,bl){var bi="cbk_"+bj.replace(/[^-a-zA-Z0-9_]/g,"");var bk="<script> Targeter.callbacks."+bi+"()<\/script>";f[bi]=function(bn){o(bj+" injected","targeterEvent",{subtype:"scriptInjectionStarted",synchronicity:"sync"});bm();Z("injectScriptSynchronously")};document.write('<script class="blockingScript" id="'+bl+'" src="'+bj+'"><\/script>');document.write(bk)};var aU=function(bk,bn,bm){o(bk+" injected","targeterEvent",{subtype:"scriptInjectionStarted",synchronicity:"async"});bn=bn||function(){};var bi=document.getElementsByTagName("script")[0];var bj=document.createElement("script");bj.async=at.async;bj.classList.add("asyncScript");bj.onload=function bl(){o(bk+" executed","targeterEvent",{subtype:"scriptInjectionFinished",synchronicity:"async"});bn();Z("injectScriptAsynchronously")};bj.src=bk;bj.id=bm;bi.parentNode.appendChild(bj,bi)};var aI=function(bi,bk,bj){inject=(at.async)?aU:ak;inject(bi,bk,bj)};var j=function(bk,bj,bi){bi=bi||"";if(y){console[bk](bj,bi);o(bj,"targeterEvent",{method:bk,secondary:bi,subtype:"consoleLog"})}};var av=function(){a2.Targeter.isFullyInstantiated=true;aV({timeout:S(at.safetyTimeout,L).remainingAdjusted,source:"finishUp"});o("end time","targeterEvent",{subtype:"targeterBoundary"})};var az=function(bi){aY();if(Targeter.isInDebugMode){Targeter.internals={timeline:[],config:{instantiation:q(bi),defaults:bh,queryParams:{},}}}o("Targeter loads and logs start time","targeterEvent",{subtype:"targeterBoundary",timestamp:L,markPerformance:true});aK("timeoutInitialized")};var a8=function(bk){var bi=aB(at.killSwitch);var bj=bi?a4[at.killSwitch]:null;return bi?bj.timeoutBlackList.indexOf(bk)>-1:false};var d=function(bi,bj){Targeter.cleanUp({source:bj});aj.timedOut=true;if(bi.ensureRegionalMboxVisibility){ba()}};var a=function(bi,bj){return aB(bj)&&!aj.timedOut&&!a8(bi)};var aK=function(bk,bj){bj=bj||"";var bm=b[bk];var bp=a(bk,bm);if(bp){var bn=bm.label.replace(/{mboxName}/,bj);var bl=aB(bm.forcePageReveal)?bm.forcePageReveal:false;var bo="setTimeoutStatus ("+bk+")";var bi={subtype:"timeoutStatusUpdated",code:bk,isTimeout:bm.isTimeout,triggersCleanUp:bm.isTimeout,markPerformance:bm.isTimeout,forcePageReveal:bl};o(bn,"targeterEvent",bi);if(bm.isTimeout){d(bm,bo)}if(bl){Y("1",bo)}}};function B(bj){var bi={value:bj,succeeds:false};try{bi.value=JSON.parse(bj);bi.succeeds=true}catch(bk){return bi}return bi}var c=function(bi){var bj=aB(bi.id)&&aB(bi.categoryId);return{succeeds:bj,value:bi,}};var h=function(bj,bi){var bk=B(bj);if(bk.succeeds){var bl=c(bk.value);if(bl.succeeds){bi.entity=bl.value}else{o("ERROR: `Targeter.config.entity` is well-formed but not valid.","targeterEvent",{subtype:"entityConfigValidationError",details:bl,})}}else{o("ERROR: `Targeter.config.entity` is malformed and failed to parse.","targeterEvent",{subtype:"entityConfigParseError",details:bk,})}};var au=function(bi){a2.targetGlobalSettings=a2.targetGlobalSettings||{};a2.targetGlobalSettings.enabled=false;a2.targetGlobalSettings.globalMboxAutoCreate=false;a2.targetPageParams=function(){return bi}};var M=function(bj){var bi={profile:G};au(bi);e();bj=ax(bj,x);bj=ar(bj,{safetyTimeout:Number});a6(at,bh,bj);if(at.entity){h(at.entity,bi)}if(at.loadDunAndBradstreet){Targeter.params.dunAndBradstreet=""}if(at.async===false){j("warn","WARNING: When `async` is false, the safety timeout is ignored and there is a slight risk of an indefinite hang, especially with config `delayFordata` set to `true`.")}aS(at.hideMethod);aM(at)};var ab=function(){Q();o("Targeter ready to make UID request","targetEvent",{authStatusIsSynced:cdc.sso.authStatusIsSynced,subtype:"targeterUIDRequestReady"});cdc.sso.addReadyListener(an)};var a0=function(){var bi=at.async&&at.hideMethod.indexOf("page")>-1;if(bi){setTimeout(function(){var bj=document.getElementById("at-id-body-style");if(bj!==null){bj.parentNode.removeChild(bj)}},350)}return bi};var I=function(bl){var bi={subtype:"elementStylesUpdated",initiator:bl.source||"unknown",removedTargetableClasses:true,revealedRegionalMboxes:false,removedBodyHideStyleTag:false,domBodyExists:!!document.body,timeoutStatusCode:bl.timeoutStatusCode||null};be(bl.source);bi.removedBodyHideStyleTag=a0();if(Targeter.isInDebugMode){var bj=g();bi.regionalMboxCount=bj.length;bi.visibleRegionalMboxCount=bj.filter(function(bm){return bm.style.visibility==="visible"}).length}if(bl.revealRegionalMboxes){var bk=bl.regionalMboxId;R(bk);bi.revealedRegionalMboxes=true;if(bk){bi.revealedRegionalMboxId=bk}}o("updated element styles","targeterEvent",bi)};var V=function(){var bi=100;af=setInterval(function(){var bl=g().length;var bj=S(at.safetyTimeout,L).remainingAdjusted;o("polled for elements with class `mboxDefault`","targeterEvent",{mboxCount:bl,subtype:"pollingEvent"});var bk=bl>0&&bj<=1&&at.killSwitch!=="timeoutBeforeAdobeLibrary";if(bk||at.killSwitch==="timeoutBeforeDomInteractive"){aK("timeoutBeforeDomInteractive");clearInterval(af)}if(document.readyState==="interactive"){clearInterval(af)}},bi)};var n=function(bi){if(!a2.Targeter.isFullyInstantiated){az(bi);M(bi);V();ab();av()}else{j("warn","WARNING: Targeter already exists and is a singleton, cannot re-instantiate.");return a2.Targeter}};return{params:G,load:n,config:at,cleanUp:aV,markPerformance:E,callbacks:f,currentHostMatches:ap,regionalMboxQueue:aR,defaults:bh,timeoutStatuses:b,classNames:bc,testAccountWhitelist:W,serviceManifests:aJ,targetAccountConfigs:D,absolutePathWhitelist:a1,queryParameters:x,defaultDomain:s,offerTriggersRendering:J,forcedOffers:a3}})(window);
